{% extends "admin/admin_base.html" %}
{% block admin_content %}
<div class="container mt-4">
  <h2>Historia treningów</h2>
  <div class="table-responsive mt-3">
  <table class="table table-bordered table-sm mb-0">
    <thead class="table-light">
      <tr>
        <th>Data</th>
        <th>Miejsce</th>
        <th>Trener</th>
        <th>Wolontariusze</th>
      </tr>
    </thead>
    <tbody>
      {% for t in trainings %}
      <tr>
        <td>{{ t.date.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>{{ t.location.name }}</td>
        <td>{{ t.coach.first_name }} {{ t.coach.last_name }}<br><small>{{ t.coach.phone_number }}</small></td>
        <td>
          <ul class="mb-0">
            {% for b in t.bookings %}
              <li>{{ b.volunteer.first_name }} {{ b.volunteer.last_name }}</li>
            {% endfor %}
          </ul>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>

  {% if pagination.pages > 1 %}
  <nav aria-label="Paginacja">
    <ul class="pagination">
      <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
        <a class="page-link" href="{{ url_for('admin.history', page=pagination.prev_num) }}" aria-label="Poprzednia">&laquo;</a>
      </li>
      {% for p in range(1, pagination.pages + 1) %}
      <li class="page-item {% if p == pagination.page %}active{% endif %}">
        <a class="page-link" href="{{ url_for('admin.history', page=p) }}">{{ p }}</a>
      </li>
      {% endfor %}
      <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
        <a class="page-link" href="{{ url_for('admin.history', page=pagination.next_num) }}" aria-label="Następna">&raquo;</a>
      </li>
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
